import{a as O}from"./chunk-RRDE46KL.js";import{a as T,b as $}from"./chunk-HNXTNAQJ.js";import{B as N,C as Z,D as j,E as P,F as B,G as R,H as q,K as J,M as A,e as b,f as L,g as c,h as S,i as f,j as g,k as p,l as z,m as d,n as a,o as s,p as m,q as w,r as C,s as E,t as h,u as v,v as y,w as D,x as l,y as F,z as k}from"./chunk-QART5UNG.js";var H=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-maps-layout"]],decls:2,vars:0,template:function(t,n){t&1&&m(0,"maps-side-menu")(1,"router-outlet")},dependencies:[J,T],styles:["maps-side-menu[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;z-index:999;width:200px}"]});let i=e;return i})();var K=b(O());var oe=["map"],G=(()=>{let e=class e{ngAfterViewInit(){if(!this.divMap)return;let o=new K.default.Map({container:this.divMap.nativeElement,style:"mapbox://styles/mapbox/streets-v12",center:[-103.42390974969136,20.609427225114203],zoom:9})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-full-screen-page"]],viewQuery:function(t,n){if(t&1&&h(oe,5),t&2){let r;v(r=y())&&(n.divMap=r.first)}},decls:2,vars:0,consts:[["map",""]],template:function(t,n){t&1&&m(0,"div",null,0)},styles:["div[_ngcontent-%COMP%]{width:100vw;height:100vh}"]});let i=e;return i})();var I=b(O());var ne=["map"],W=(()=>{let e=class e{constructor(){this.zoom=15,this.currentCenter=new I.default.LngLat(-103.42390974969136,20.609427225114203)}ngAfterViewInit(){this.divMap&&(this.map=new I.default.Map({container:this.divMap.nativeElement,style:"mapbox://styles/mapbox/streets-v12",center:this.currentCenter,zoom:this.zoom}),this.mapListener())}ngOnDestroy(){this.map?.remove()}mapListener(){if(!this.map)throw"mapa no existe";this.map.on("zoom",o=>{this.zoom=this.map.getZoom()}),this.map.on("zoomend",o=>{this.map.getZoom()<18||(this.map?.zoomTo(18),this.zoom=this.map.getZoom())}),this.map.on("move",()=>{this.currentCenter=this.map.getCenter()})}zoomIn(){this.map?.zoomIn()}zoomOut(){this.map?.zoomOut()}zoomChange(o){this.zoom=Number(o),this.map?.zoomTo(this.zoom)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-zoom-pages"]],viewQuery:function(t,n){if(t&1&&h(ne,5),t&2){let r;v(r=y())&&(n.divMap=r.first)}},decls:17,vars:6,consts:[["map",""],["zoomBar",""],["id","map"],[1,"floating-range","p-2"],[1,"floating-content"],[1,"btn","btn-primary",3,"click"],["type","range","min","-2","max","18",1,"form-ranfe","px-2",3,"input","value"],[1,"form-label"]],template:function(t,n){if(t&1){let r=w();a(0,"p"),l(1,"zoom-pages works!"),s(),m(2,"div",2,0),a(4,"div",3)(5,"div",4)(6,"button",5),C("click",function(){return f(r),g(n.zoomOut())}),l(7,"-"),s(),a(8,"input",6,1),C("input",function(){f(r);let V=D(9);return g(n.zoomChange(V.value))}),s(),a(10,"button",5),C("click",function(){return f(r),g(n.zoomIn())}),l(11,"+"),s()(),a(12,"span",7),l(13),Z(14,"number"),m(15,"br"),l(16),s()()}t&2&&(p(8),d("value",n.zoom),p(5),k(" Zoom: ",j(14,3,n.zoom,"2.2-2")," "),p(3),k(" ",n.currentCenter," "))},dependencies:[R],styles:["#map[_ngcontent-%COMP%]{width:100vw;height:100vh;background-color:red}.floating-range[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:20px;z-index:999;background-color:wheat;border-radius:10px;box-shadow:0 5px 10px #00000080}.floating-content[_ngcontent-%COMP%]{display:flex;align-items:center}"]});let i=e;return i})();var _=b(O());var re=["map"],ae=i=>({backgroundColor:i});function me(i,e){if(i&1){let u=w();a(0,"li",5),C("click",function(){let t=f(u).$implicit,n=E();return g(n.flyTo(t.marker))})("dblclick",function(){let t=f(u).index,n=E();return g(n.deleteMarker(t))}),l(1),s()}if(i&2){let u=e.$implicit,o=e.index;d("ngStyle",N(2,ae,u.color)),p(),k(" marker ",o+1," ")}}var X=(()=>{let e=class e{constructor(){this.zoom=14,this.currentCenter=new _.default.LngLat(-103.42390974969136,20.609427225114203),this.markers=[]}ngAfterViewInit(){this.divMap&&(this.map=new _.default.Map({container:this.divMap.nativeElement,style:"mapbox://styles/mapbox/streets-v12",center:this.currentCenter,zoom:this.zoom}),this.readToLocalStorage())}createrMarker(){if(!this.map)return;let o="#xxxxxx".replace(/x/g,n=>(Math.random()*16|0).toString(16)),t=this.map.getCenter();this.addMarker(t,o)}addMarker(o,t){if(!this.map)return;let n=new _.default.Marker({color:t,draggable:!0}).setLngLat(o).addTo(this.map).on("dragend",()=>{this.saveToLocalStorage()});this.markers.push({marker:n,color:t}),this.saveToLocalStorage()}deleteMarker(o){this.markers[o].marker.remove(),this.markers.splice(o,1)}flyTo(o){this.map?.flyTo({zoom:15,center:o.getLngLat()})}saveToLocalStorage(){let o=this.markers.map(t=>({color:t.color,langlat:t.marker.getLngLat().toArray()}));localStorage.setItem("plainMArker",JSON.stringify(o))}readToLocalStorage(){let o=localStorage.getItem("plainMArker")??"[]";JSON.parse(o).forEach(({color:n,langlat:r})=>{let[M,V]=r,ie=new _.default.LngLat(M,V);this.addMarker(ie,n)})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-markers-page"]],viewQuery:function(t,n){if(t&1&&h(re,5),t&2){let r;v(r=y())&&(n.divMap=r.first)}},decls:6,vars:1,consts:[["map",""],["id","map"],[1,"list-group"],["class","list-group-item",3,"ngStyle","click","dblclick",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"list-group-item",3,"click","dblclick","ngStyle"]],template:function(t,n){if(t&1){let r=w();m(0,"div",1,0),a(2,"ul",2),z(3,me,2,4,"li",3),s(),a(4,"button",4),C("click",function(){return f(r),g(n.createrMarker())}),l(5,` + agregar marcardor
`),s()}t&2&&(p(3),d("ngForOf",n.markers))},dependencies:[P,B],styles:["#map[_ngcontent-%COMP%]{width:100vw;height:100vh;background-color:red}button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px}.list-group[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px}"]});let i=e;return i})();var Q=b(O());var se=["map"],Y=(()=>{let e=class e{ngAfterViewInit(){if(!this.divMap?.nativeElement)throw"Map div not found";if(!this.lngLat)throw"lnlat canot be null";this.map=new Q.default.Map({container:this.divMap.nativeElement,style:"mapbox://styles/mapbox/streets-v12",center:this.lngLat,zoom:14,dragPan:!0}),new Q.default.Marker().setLngLat(this.lngLat).addTo(this.map).addTo(this.map)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["map-mini-map"]],viewQuery:function(t,n){if(t&1&&h(se,5),t&2){let r;v(r=y())&&(n.divMap=r.first)}},inputs:{lngLat:"lngLat"},decls:2,vars:0,consts:[["map",""]],template:function(t,n){t&1&&m(0,"div",null,0)},styles:["div[_ngcontent-%COMP%]{width:100%;height:150px;margin:0}"]});let i=e;return i})();function le(i,e){if(i&1&&(a(0,"div",6)(1,"div",8),m(2,"map-mini-map",9),a(3,"div",10)(4,"h5",11),l(5),s(),a(6,"p",12),l(7),s()()()()),i&2){let u=e.$implicit;p(2),d("lngLat",u.lngLat),p(3),F(u.title),p(2),F(u.description)}}var ee=(()=>{let e=class e{constructor(){this.houses=[{title:"Casa residencial, Canad\xE1",description:"Bella propiedad en Katana, Canad\xE1",lngLat:[-75.92722289474008,45.280015511264466]},{title:"Casa de playa, M\xE9xico",description:"Hermosa casa de playa en Acapulco, M\xE9xico",lngLat:[-99.91287720907991,16.828940930185748]},{title:"Apartamento, Argentina",description:"Lujoso apartamento en el coraz\xF3n de Buenos Aires, Argentina",lngLat:[-58.430166677283445,-34.57150108832866]},{title:"Local comercial, Espa\xF1a",description:"Local comercial disponible en Madrid, Espa\xF1a, cerca de El Jard\xEDn Secreto.",lngLat:[-3.7112735618380177,40.42567285425766]}]}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c({type:e,selectors:[["app-properties-pages"]],decls:12,vars:2,consts:[[1,"row","mt-3"],[1,"col-2"],[1,"col"],[1,"row","mt-2"],[1,"row"],["class","col-4 mb-2",4,"ngFor","ngForOf"],[1,"col-4","mb-2"],[3,"counter"],[1,"card"],[3,"lngLat"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,n){t&1&&(a(0,"div",0),m(1,"div",1),a(2,"div",2)(3,"h3"),l(4,"Listado de propiedades"),s()()(),a(5,"div",3),m(6,"div",1),a(7,"div",2)(8,"div",4),z(9,le,8,3,"div",5),a(10,"div",6),m(11,"counter-alone",7),s()()()()),t&2&&(p(9),d("ngForOf",n.houses),p(2),d("counter",10))},dependencies:[P,$,Y],styles:["maps-side-menu[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;z-index:999}"]});let i=e;return i})();var ce=[{path:"",component:H,children:[{path:"fullscreen",component:G},{path:"zoom-ranges",component:W},{path:"markers",component:X},{path:"properties",component:ee},{path:"**",redirectTo:"fullscreen"}]}],te=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=S({type:e}),e.\u0275inj=L({imports:[A.forChild(ce),A]});let i=e;return i})();var qe=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=S({type:e}),e.\u0275inj=L({imports:[q,te,T]});let i=e;return i})();export{qe as MapsModule};
